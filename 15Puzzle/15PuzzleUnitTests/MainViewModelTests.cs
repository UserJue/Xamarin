using System;
using System.Globalization;
using Microsoft.VisualStudio.TestTools.UnitTesting;
using _15Puzzle.Models;
using _15Puzzle.ViewModels;

namespace _15PuzzleUnitTests
{
    [TestClass]
    public class MainViewModelTests
    {
        readonly double[][] posesX = {
                new [] {
                                 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0,      2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0,      4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0,      5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                                 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0,      2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0,      4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0,      5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                                 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0,      2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0,      4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0,      5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                                 1.0, 2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0,      2.0, 3.0, 4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0,      4.0, 5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0,      5.0,
                        },
                new [] {
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0, 5.0,
                            0.0, 1.0, 2.0, 3.0, 4.0,
                        },
                    };

        private readonly double[][] posesY =
        {
            new[]
            {
                     0.0, 0.0, 0.0, 0.0, 0.0, 
                1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                2.0, 2.0, 2.0, 2.0, 2.0, 2.0,
                3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
            },
            new[]
            {
                0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
                     1.0, 1.0, 1.0, 1.0, 1.0,
                2.0, 2.0, 2.0, 2.0, 2.0, 2.0,
                3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
            },
            new[]
            {
                0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
                1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                     2.0, 2.0, 2.0, 2.0, 2.0,
                3.0, 3.0, 3.0, 3.0, 3.0, 3.0,
            },
            new[]
            {
                0.0, 0.0, 0.0, 0.0, 0.0, 0.0,
                1.0, 1.0, 1.0, 1.0, 1.0, 1.0,
                2.0, 2.0, 2.0, 2.0, 2.0, 2.0,
                     3.0, 3.0, 3.0, 3.0, 3.0,
            },
        };

        [TestMethod]
        public void OMoveX_notMoved_Right01()
        {
            var tilesCount = 23;
            var holeIndex = 0;
            var dX = 0.2;
            var dY = 0;
            var model = new _15Puzzle.Models._15Puzzle();
            var settings = new Settings();
            settings.PuzzleInfos.Add(new PuzzleInfo("dummy", "dummy", 15, false));
            settings.PuzzleInfo = settings.PuzzleInfos[0];
            for (var i = 0; i < tilesCount; i++)
            {
                model.Create(tilesCount, holeIndex, true);
                var sut = new MainViewModel(model, settings,false);
                sut.Tiles[i].OnMove(dX,dY);
                for (var j = 0; j < tilesCount; j++)
                {
                    Assert.AreEqual(posesX[holeIndex][j],sut.Tiles[j].X);
                    Assert.AreEqual(posesY[holeIndex/6][j], sut.Tiles[j].Y);
                }
            }
        }
    }
}
